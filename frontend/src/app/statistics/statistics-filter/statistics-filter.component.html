<mat-accordion>
    <mat-expansion-panel #panel [(expanded)]="filterExpanded">
        <mat-expansion-panel-header>
            <mat-panel-title>
                @if (panel.expanded) {
                    {{ 'StatisticsPage.Filter' | translate }}
                } @else {
                    {{ fromControl.value | date : ('EventShortDateFormat' | translate) }}
                    -
                    {{ toControl.value | date : ('EventShortDateFormat' | translate) }}
                }
            </mat-panel-title>
        </mat-expansion-panel-header>


        <form [formGroup]="form" (ngSubmit)="submitForm()">
            <div>
                <div class="date-interval-filter" (click)="picker.open()">
                    <span class="interval">
                        {{ fromControl.value | date : ('EventShortDateFormat' | translate) }}
                        -
                        {{ toControl.value | date : ('EventShortDateFormat' | translate) }}
                    </span>
                    <span class="picker">
                        <mat-date-range-input class="hidden" [rangePicker]="picker">
                            <input matStartDate [formControl]="fromControl">
                            <input matEndDate [formControl]="toControl">
                        </mat-date-range-input>
                        <mat-datepicker-toggle matIconSuffix [for]="picker"/>
                        <mat-date-range-picker #picker [touchUi]="mobileScreen"/>
                    </span>
                </div>
                <div class="city-filter">
                    <mat-form-field>
                        <mat-label>{{ 'DepartmentPage.Form.City' | translate }}</mat-label>
                        <mat-select [formControl]="cityControl">
                            @for (city of cityOptions; track city) {
                                <mat-option [value]="city">{{ 'OperationCity.' + city | translate }}</mat-option>
                            }
                        </mat-select>
                    </mat-form-field>
                </div>

                <div>
                    <button mat-flat-button
                            color="accent"
                            type="submit">
                        {{ 'StatisticsPage.Generate' | translate }}
                    </button>
                </div>
            </div>
        </form>
    </mat-expansion-panel>
</mat-accordion>
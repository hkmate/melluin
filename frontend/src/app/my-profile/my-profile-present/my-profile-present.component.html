<h1>{{ 'PersonPage.MyProfile' | translate }}</h1>
@let userValue = user();
@let personValue = person();

<div>
    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.Present.LastName' | translate }}</mat-card-subtitle>
            <mat-card-title>{{ personValue.lastName }}</mat-card-title>
        </mat-card-header>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.Present.FirstName' | translate }}</mat-card-subtitle>
            <mat-card-title>{{ personValue.firstName }}</mat-card-title>
        </mat-card-header>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.Present.Email' | translate }}</mat-card-subtitle>
            <mat-card-title>{{ personValue.email | optional: '-' }}</mat-card-title>
        </mat-card-header>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.Present.Phone' | translate }}</mat-card-subtitle>
            <mat-card-title>{{ personValue.phone | optional: '-' }}</mat-card-title>
        </mat-card-header>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.Present.Preferences' | translate }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content class="preferences-card">
            <div>
                <mat-checkbox [ngModel]="personValue.preferences?.canVolunteerSeeMyEmail"
                              [disabled]="true"></mat-checkbox>
                {{ 'PersonPage.Present.CanVolunteerSeeMyEmail' | translate }}
            </div>
            <div>
                <mat-checkbox [ngModel]="personValue.preferences?.canVolunteerSeeMyPhone"
                              [disabled]="true"></mat-checkbox>
                {{ 'PersonPage.Present.CanVolunteerSeeMyPhone' | translate }}
            </div>
        </mat-card-content>
    </mat-card>

    <div class="divider"></div>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.User.Present.UserName' | translate }}</mat-card-subtitle>
            <mat-card-title>{{ userValue.userName }}</mat-card-title>
        </mat-card-header>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.User.Present.Password' | translate }}</mat-card-subtitle>
            <mat-card-title>{{ 'PersonPage.User.Present.PasswordPlaceholder' | translate }}</mat-card-title>
        </mat-card-header>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.User.Present.Status' | translate }}</mat-card-subtitle>
            <mat-card-title>
                {{ (userValue.isActive ? 'PersonPage.User.Active' : 'PersonPage.User.Inactive') | translate }}
            </mat-card-title>
        </mat-card-header>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.User.Present.LastLogin' | translate }}</mat-card-subtitle>
            <mat-card-title>
                @if (userValue.lastLogin) {
                    {{ userValue.lastLogin | date :'YYYY.MM.dd HH:mm:ss' }}
                } @else {
                    {{ 'NotLoggedInYet' | translate }}
                }
            </mat-card-title>
        </mat-card-header>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.User.Present.Roles' | translate }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <ul>
                @for (role of userValue.roles; track role) {
                    <li class="role">{{ role.name }}</li>
                }
            </ul>
        </mat-card-content>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-subtitle>{{ 'PersonPage.User.Present.Permissions' | translate }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <ul>
                @for (permission of userValue.customPermissions; track permission) {
                    <li class="permission">{{ permission }}</li>
                } @empty {
                    {{ 'NoData' | translate }}
                }
            </ul>
        </mat-card-content>
    </mat-card>

    <div class="divider"></div>

    <app-user-settings-presenter [userSettings]="userSettings()"></app-user-settings-presenter>
</div>
